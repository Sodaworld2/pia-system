{"data":"$b64 = \"Y29uc3QgZnMgPSByZXF1aXJlKCdmcycpOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBwcm9wb3NhbHMudGVzdC50cyAtIEZpeGVkOiBpbXBvcnQgcm91dGVyIGRpcmVjdGx5LCBOT1QgYXBwIGZyb20gLi4vaW5kZXgKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpjb25zdCBwcm9wb3NhbHNUZXN0ID0gYGltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCB2aSwgYmVmb3JlRWFjaCB9IGZyb20gJ3ZpdGVzdCc7CmltcG9ydCBzdXBlcnRlc3QgZnJvbSAnc3VwZXJ0ZXN0JzsKaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7CgovLyBNb2NrIGRhdGFiYXNlIChob2lzdGVkIGJlZm9yZSBpbXBvcnRzKQp2aS5tb2NrKCcuLi9kYXRhYmFzZScsICgpID0+ICh7CiAgZGVmYXVsdDogdmkuZm4oKSwKICBfX2VzTW9kdWxlOiB0cnVlLAp9KSk7CgovLyBNb2NrIHZhbGlkYXRpb24gbWlkZGxld2FyZSB0byBwYXNzIHRocm91Z2gKdmkubW9jaygnLi4vbWlkZGxld2FyZS92YWxpZGF0aW9uJywgKCkgPT4gKHsKICB2YWxpZGF0ZTogKCkgPT4gKF9yZXE6IGFueSwgX3JlczogYW55LCBuZXh0OiBhbnkpID0+IG5leHQoKSwKICB2YWxpZGF0b3JzOiB7CiAgICB2b3RlVHlwZToge30sCiAgICB2b3RpbmdQb3dlcjoge30sCiAgICBldGhlcmV1bUFkZHJlc3M6ICgpID0+ICh7fSksCiAgfSwKfSkpOwoKLy8gTW9jayBzYW5pdGl6ZSB1dGlsaXR5IHRvIHBhc3MgdGhyb3VnaAp2aS5tb2NrKCcuLi91dGlscy9zYW5pdGl6ZScsICgpID0+ICh7CiAgc2FuaXRpemVCb2R5OiAoKSA9PiAoX3JlcTogYW55LCBfcmVzOiBhbnksIG5leHQ6IGFueSkgPT4gbmV4dCgpLAogIHNhbml0aXplOiAodjogYW55KSA9PiB2LAogIHNhbml0aXplT2JqZWN0OiAodjogYW55KSA9PiB2LAp9KSk7CgppbXBvcnQgZGIgZnJvbSAnLi4vZGF0YWJhc2UnOwppbXBvcnQgcm91dGVyIGZyb20gJy4vcHJvcG9zYWxzJzsKCmNvbnN0IGZ1dHVyZURhdGUgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCk7Cgpjb25zdCBtb2NrUHJvcG9zYWwgPSB7CiAgaWQ6ICdwMScsCiAgdGl0bGU6ICdUZXN0IFByb3Bvc2FsJywKICBzdGF0dXM6ICdBY3RpdmUnLAogIHByb3Bvc2VyOiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6ICdUZXN0IFByb3Bvc2VyJyB9KSwKICB2b3Rlc0ZvcjogMTAwLAogIHZvdGVzQWdhaW5zdDogMCwKICB2b3Rlc0Fic3RhaW46IDAsCiAgcXVvcnVtOiA1MCwKICBlbmREYXRlOiBmdXR1cmVEYXRlLAp9OwoKZnVuY3Rpb24gYnVpbGRBcHAoKSB7CiAgY29uc3QgYXBwID0gZXhwcmVzcygpOwogIGFwcC51c2UoZXhwcmVzcy5qc29uKCkpOwogIGFwcC51c2UoJy9hcGkvcHJvcG9zYWxzJywgcm91dGVyKTsKICByZXR1cm4gYXBwOwp9CgpkZXNjcmliZSgnUHJvcG9zYWxzIEFQSScsICgpID0+IHsKICBsZXQgYXBwOiBSZXR1cm5UeXBlPHR5cGVvZiBleHByZXNzPjsKCiAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICB2aS5jbGVhckFsbE1vY2tzKCk7CiAgICBsZXQgcHJvcG9zYWxJbkRiID0geyAuLi5tb2NrUHJvcG9zYWwgfTsKICAgIGFwcCA9IGJ1aWxkQXBwKCk7CgogICAgdmkubW9ja2VkKGRiKS5tb2NrSW1wbGVtZW50YXRpb24oKHRhYmxlTmFtZTogc3RyaW5nKSA9PiB7CiAgICAgIGlmICh0YWJsZU5hbWUgPT09ICdwcm9wb3NhbF92b3RlcycpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgd2hlcmU6IHZpLmZuKCkubW9ja1JldHVyblZhbHVlKHsKICAgICAgICAgICAgZmlyc3Q6IHZpLmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobnVsbCksCiAgICAgICAgICB9KSwKICAgICAgICAgIGluc2VydDogdmkuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbMV0pLAogICAgICAgIH0gYXMgYW55OwogICAgICB9CiAgICAgIC8vIHByb3Bvc2FscyB0YWJsZQogICAgICByZXR1cm4gewogICAgICAgIHNlbGVjdDogdmkuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbcHJvcG9zYWxJbkRiXSksCiAgICAgICAgd2hlcmU6IHZpLmZuKCkubW9ja1JldHVyblZhbHVlKHsKICAgICAgICAgIGZpcnN0OiB2aS5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBQcm9taXNlLnJlc29sdmUoeyAuLi5wcm9wb3NhbEluRGIgfSkpLAogICAgICAgICAgdXBkYXRlOiB2aS5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoZGF0YTogYW55KSA9PiB7CiAgICAgICAgICAgIHByb3Bvc2FsSW5EYiA9IHsgLi4ucHJvcG9zYWxJbkRiLCAuLi5kYXRhIH07CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoMSk7CiAgICAgICAgICB9KSwKICAgICAgICB9KSwKICAgICAgfSBhcyBhbnk7CiAgICB9KTsKICB9KTsKCiAgaXQoJ0dFVCAvYXBpL3Byb3Bvc2FscyBzaG91bGQgcmV0dXJuIGEgbGlzdCBvZiBwcm9wb3NhbHMnLCBhc3luYyAoKSA9PiB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN1cGVydGVzdChhcHApLmdldCgnL2FwaS9wcm9wb3NhbHMnKTsKICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTsKICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0JlSW5zdGFuY2VPZihBcnJheSk7CiAgICBleHBlY3QocmVzcG9uc2UuYm9keVswXS5pZCkudG9CZSgncDEnKTsKICB9KTsKCiAgaXQoJ1BPU1QgL2FwaS9wcm9wb3NhbHMvOmlkL3ZvdGUgc2hvdWxkIHVwZGF0ZSB0aGUgdm90ZSBjb3VudCcsIGFzeW5jICgpID0+IHsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXJ0ZXN0KGFwcCkKICAgICAgLnBvc3QoJy9hcGkvcHJvcG9zYWxzL3AxL3ZvdGUnKQogICAgICAuc2VuZCh7CiAgICAgICAgdm90ZVR5cGU6ICdmb3InLAogICAgICAgIHZvdGluZ1Bvd2VyOiA1MCwKICAgICAgICB2b3RlckFkZHJlc3M6ICcweDEyMzQ1Njc4OTBhYmNkZWYxMjM0NTY3ODkwYWJjZGVmMTIzNDU2NzgnLAogICAgICB9KTsKCiAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7CiAgICBleHBlY3QocmVzcG9uc2UuYm9keS52b3Rlc0ZvcikudG9CZSgxNTApOwogIH0pOwp9KTsKYDsKCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gdG9rZW5fZGlzdHJpYnV0aW9uLnRlc3QudHMgLSBGaXhlZDogaW1wb3J0IHJvdXRlciBkaXJlY3RseQovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CmNvbnN0IHRva2VuRGlzdFRlc3QgPSBgaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIHZpLCBiZWZvcmVFYWNoIH0gZnJvbSAndml0ZXN0JzsKaW1wb3J0IHN1cGVydGVzdCBmcm9tICdzdXBlcnRlc3QnOwppbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJzsKCi8vIE1vY2sgZGF0YWJhc2UgKGhvaXN0ZWQgYmVmb3JlIGltcG9ydHMpCnZpLm1vY2soJy4uL2RhdGFiYXNlJywgKCkgPT4gKHsKICBkZWZhdWx0OiB2aS5mbigpLAogIF9fZXNNb2R1bGU6IHRydWUsCn0pKTsKCi8vIE1vY2sgYXhpb3MgZm9yIHRva2VuIHJld2FyZCBBUEkgY2FsbAp2aS5tb2NrKCdheGlvcycsICgpID0+ICh7CiAgZGVmYXVsdDogewogICAgcG9zdDogdmkuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7CiAgICAgIGRhdGE6IHsKICAgICAgICBuZXdCYWxhbmNlOiAxMDEwMDAsCiAgICAgICAgdHJhbnNhY3Rpb25JZDogJ3R4LXRlc3QtMTIzJywKICAgICAgfSwKICAgIH0pLAogIH0sCn0pKTsKCi8vIE1vY2sgdXVpZAp2aS5tb2NrKCd1dWlkJywgKCkgPT4gKHsKICB2NDogKCkgPT4gJ3Rlc3QtdXVpZC0xMjM0JywKfSkpOwoKaW1wb3J0IGRiIGZyb20gJy4uL2RhdGFiYXNlJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuL3Rva2VuX2Rpc3RyaWJ1dGlvbic7Cgpjb25zdCBOT1cgPSBEYXRlLm5vdygpOwpjb25zdCBPTkVfWUVBUiA9IDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDA7Cgpjb25zdCBtb2NrR3JvdXAgPSB7CiAgaWQ6ICcxJywKICBncm91cE5hbWU6ICdGb3VuZGVycycsCiAgY2xhaW1lZDogMCwKICB0b3RhbFRva2VuczogMjAwMDAwMDAsCn07Cgpjb25zdCBtb2NrVmVzdGluZ1NjaGVkdWxlID0gewogIGlkOiAndmVzdC0xJywKICB1c2VyX2lkOiAndXNlci0xJywKICBncm91cF9pZDogJzEnLAogIHRvdGFsX3Rva2VuczogMjAwMDAwLAogIGNsYWltZWRfdG9rZW5zOiAwLAogIHN0YXJ0X2RhdGU6IG5ldyBEYXRlKE5PVyAtIE9ORV9ZRUFSKS50b0lTT1N0cmluZygpLAogIGVuZF9kYXRlOiBuZXcgRGF0ZShOT1cgKyBPTkVfWUVBUikudG9JU09TdHJpbmcoKSwKICBjbGlmZl9kYXRlOiBudWxsLAogIGNsaWZmX3BlcmNlbnRhZ2U6IDAsCn07CgpmdW5jdGlvbiBidWlsZEFwcCgpIHsKICBjb25zdCBhcHAgPSBleHByZXNzKCk7CiAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7CiAgYXBwLnVzZSgnL2FwaS90b2tlbi1kaXN0cmlidXRpb24nLCByb3V0ZXIpOwogIHJldHVybiBhcHA7Cn0KCmRlc2NyaWJlKCdUb2tlbiBEaXN0cmlidXRpb24gQVBJJywgKCkgPT4gewogIGxldCBhcHA6IFJldHVyblR5cGU8dHlwZW9mIGV4cHJlc3M+OwoKICBiZWZvcmVFYWNoKCgpID0+IHsKICAgIHZpLmNsZWFyQWxsTW9ja3MoKTsKICAgIGFwcCA9IGJ1aWxkQXBwKCk7CgogICAgdmkubW9ja2VkKGRiKS5tb2NrSW1wbGVtZW50YXRpb24oKHRhYmxlTmFtZTogc3RyaW5nKSA9PiB7CiAgICAgIGlmICh0YWJsZU5hbWUgPT09ICd2ZXN0aW5nX3NjaGVkdWxlcycpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgd2hlcmU6IHZpLmZuKCkubW9ja1JldHVyblZhbHVlKHsKICAgICAgICAgICAgZmlyc3Q6IHZpLmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyAuLi5tb2NrVmVzdGluZ1NjaGVkdWxlIH0pLAogICAgICAgICAgICB1cGRhdGU6IHZpLmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoMSksCiAgICAgICAgICB9KSwKICAgICAgICB9IGFzIGFueTsKICAgICAgfQogICAgICAvLyB0b2tlbl9kaXN0cmlidXRpb25fZ3JvdXBzIHRhYmxlCiAgICAgIHJldHVybiB7CiAgICAgICAgc2VsZWN0OiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFt7IC4uLm1vY2tHcm91cCB9XSksCiAgICAgICAgd2hlcmU6IHZpLmZuKCkubW9ja1JldHVyblZhbHVlKHsKICAgICAgICAgIGZpcnN0OiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgLi4ubW9ja0dyb3VwIH0pLAogICAgICAgICAgdXBkYXRlOiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKDEpLAogICAgICAgIH0pLAogICAgICB9IGFzIGFueTsKICAgIH0pOwogIH0pOwoKICBpdCgnR0VUIC9hcGkvdG9rZW4tZGlzdHJpYnV0aW9uIHNob3VsZCByZXR1cm4gYSBsaXN0IG9mIGdyb3VwcycsIGFzeW5jICgpID0+IHsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXJ0ZXN0KGFwcCkuZ2V0KCcvYXBpL3Rva2VuLWRpc3RyaWJ1dGlvbicpOwogICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApOwogICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvQmVJbnN0YW5jZU9mKEFycmF5KTsKICAgIGV4cGVjdChyZXNwb25zZS5ib2R5WzBdLmlkKS50b0JlKCcxJyk7CiAgfSk7CgogIGl0KCdQT1NUIC9hcGkvdG9rZW4tZGlzdHJpYnV0aW9uLzpncm91cElkL2NsYWltIHNob3VsZCBjbGFpbSB0b2tlbnMnLCBhc3luYyAoKSA9PiB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN1cGVydGVzdChhcHApCiAgICAgIC5wb3N0KCcvYXBpL3Rva2VuLWRpc3RyaWJ1dGlvbi8xL2NsYWltJykKICAgICAgLnNlbmQoeyB1c2VySWQ6ICd1c2VyLTEnLCBhbW91bnQ6IDEwMDAgfSk7CgogICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApOwogICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTsKICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmNsYWltZWQpLnRvQmUoMTAwMCk7CiAgfSk7CgogIGl0KCdQT1NUIC9hcGkvdG9rZW4tZGlzdHJpYnV0aW9uLzpncm91cElkL2NsYWltIHNob3VsZCByZWplY3QgbWlzc2luZyB1c2VySWQnLCBhc3luYyAoKSA9PiB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN1cGVydGVzdChhcHApCiAgICAgIC5wb3N0KCcvYXBpL3Rva2VuLWRpc3RyaWJ1dGlvbi8xL2NsYWltJykKICAgICAgLnNlbmQoeyBhbW91bnQ6IDEwMDAgfSk7CgogICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApOwogIH0pOwp9KTsKYDsKCi8vIFdyaXRlIGZpbGVzCmZzLndyaXRlRmlsZVN5bmMoJ2JhY2tlbmQvc3JjL3JvdXRlcy9wcm9wb3NhbHMudGVzdC50cycsIHByb3Bvc2Fsc1Rlc3QpOwpjb25zb2xlLmxvZygnV1JJVFRFTjogYmFja2VuZC9zcmMvcm91dGVzL3Byb3Bvc2Fscy50ZXN0LnRzJyk7Cgpmcy53cml0ZUZpbGVTeW5jKCdiYWNrZW5kL3NyYy9yb3V0ZXMvdG9rZW5fZGlzdHJpYnV0aW9uLnRlc3QudHMnLCB0b2tlbkRpc3RUZXN0KTsKY29uc29sZS5sb2coJ1dSSVRURU46IGJhY2tlbmQvc3JjL3JvdXRlcy90b2tlbl9kaXN0cmlidXRpb24udGVzdC50cycpOwoKY29uc29sZS5sb2coJ0RvbmUgLSBib3RoIHRlc3QgZmlsZXMgZml4ZWQgKHYyIC0gcm91dGVyLWRpcmVjdCBpbXBvcnQpLicpOwo=\"\r\nSet-Content -Path fix-tests-v2.b64 -Value $b64 -NoNewline\r\n"}