{"data":"[System.IO.File]::WriteAllText(\"fix-tests.cjs\", [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String(\"Y29uc3QgZnMgPSByZXF1aXJlKCdmcycpOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBwcm9wb3NhbHMudGVzdC50cyAtIEZpeGVkIHRvIHdvcmsgd2l0aCBjdXJyZW50IHJvdXRlCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KY29uc3QgcHJvcG9zYWxzVGVzdCA9IGBpbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgdmksIGJlZm9yZUVhY2ggfSBmcm9tICd2aXRlc3QnOwppbXBvcnQgc3VwZXJ0ZXN0IGZyb20gJ3N1cGVydGVzdCc7CmltcG9ydCBhcHAgZnJvbSAnLi4vaW5kZXgnOwppbXBvcnQgZGIgZnJvbSAnLi4vZGF0YWJhc2UnOwoKLy8gTW9jayB0aGUgZGF0YWJhc2UKdmkubW9jaygnLi4vZGF0YWJhc2UnKTsKCi8vIE1vY2sgdGhlIHZhbGlkYXRpb24gbWlkZGxld2FyZSB0byBwYXNzIHRocm91Z2gKdmkubW9jaygnLi4vbWlkZGxld2FyZS92YWxpZGF0aW9uJywgKCkgPT4gKHsKICB2YWxpZGF0ZTogKCkgPT4gKF9yZXE6IGFueSwgX3JlczogYW55LCBuZXh0OiBhbnkpID0+IG5leHQoKSwKICB2YWxpZGF0b3JzOiB7CiAgICB2b3RlVHlwZToge30sCiAgICB2b3RpbmdQb3dlcjoge30sCiAgICBldGhlcmV1bUFkZHJlc3M6ICgpID0+ICh7fSksCiAgfSwKfSkpOwoKLy8gTW9jayB0aGUgc2FuaXRpemUgdXRpbGl0eSB0byBwYXNzIHRocm91Z2gKdmkubW9jaygnLi4vdXRpbHMvc2FuaXRpemUnLCAoKSA9PiAoewogIHNhbml0aXplQm9keTogKCkgPT4gKF9yZXE6IGFueSwgX3JlczogYW55LCBuZXh0OiBhbnkpID0+IG5leHQoKSwKICBzYW5pdGl6ZTogKHY6IGFueSkgPT4gdiwKICBzYW5pdGl6ZU9iamVjdDogKHY6IGFueSkgPT4gdiwKfSkpOwoKY29uc3QgcmVxdWVzdCA9IHN1cGVydGVzdChhcHApOwoKY29uc3QgZnV0dXJlRGF0ZSA9IG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKTsKCmNvbnN0IG1vY2tQcm9wb3NhbCA9IHsKICBpZDogJ3AxJywKICB0aXRsZTogJ1Rlc3QgUHJvcG9zYWwnLAogIHN0YXR1czogJ0FjdGl2ZScsCiAgcHJvcG9zZXI6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogJ1Rlc3QgUHJvcG9zZXInIH0pLAogIHZvdGVzRm9yOiAxMDAsCiAgdm90ZXNBZ2FpbnN0OiAwLAogIHZvdGVzQWJzdGFpbjogMCwKICBxdW9ydW06IDUwLAogIGVuZERhdGU6IGZ1dHVyZURhdGUsCn07CgpkZXNjcmliZSgnUHJvcG9zYWxzIEFQSScsICgpID0+IHsKICBiZWZvcmVFYWNoKCgpID0+IHsKICAgIGxldCBwcm9wb3NhbEluRGIgPSB7IC4uLm1vY2tQcm9wb3NhbCB9OwoKICAgIHZpLm1vY2tlZChkYikubW9ja0ltcGxlbWVudGF0aW9uKCh0YWJsZU5hbWU6IHN0cmluZykgPT4gewogICAgICBpZiAodGFibGVOYW1lID09PSAncHJvcG9zYWxfdm90ZXMnKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHdoZXJlOiB2aS5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7CiAgICAgICAgICAgIGZpcnN0OiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpLCAvLyBubyBleGlzdGluZyB2b3RlCiAgICAgICAgICB9KSwKICAgICAgICAgIGluc2VydDogdmkuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbMV0pLAogICAgICAgIH0gYXMgYW55OwogICAgICB9CiAgICAgIC8vIERlZmF1bHQ6IHByb3Bvc2FscyB0YWJsZQogICAgICByZXR1cm4gewogICAgICAgIHNlbGVjdDogdmkuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbcHJvcG9zYWxJbkRiXSksCiAgICAgICAgd2hlcmU6IHZpLmZuKCkubW9ja1JldHVyblZhbHVlKHsKICAgICAgICAgIGZpcnN0OiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHByb3Bvc2FsSW5EYiksCiAgICAgICAgICB1cGRhdGU6IHZpLmZuKChkYXRhOiBhbnkpID0+IHsKICAgICAgICAgICAgcHJvcG9zYWxJbkRiID0geyAuLi5wcm9wb3NhbEluRGIsIC4uLmRhdGEgfTsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgxKTsKICAgICAgICAgIH0pLAogICAgICAgIH0pLAogICAgICAgIGZpcnN0OiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHByb3Bvc2FsSW5EYiksCiAgICAgICAgdXBkYXRlOiB2aS5mbigoZGF0YTogYW55KSA9PiB7CiAgICAgICAgICBwcm9wb3NhbEluRGIgPSB7IC4uLnByb3Bvc2FsSW5EYiwgLi4uZGF0YSB9OwogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgxKTsKICAgICAgICB9KSwKICAgICAgfSBhcyBhbnk7CiAgICB9KTsKICB9KTsKCiAgaXQoJ0dFVCAvYXBpL3Byb3Bvc2FscyBzaG91bGQgcmV0dXJuIGEgbGlzdCBvZiBwcm9wb3NhbHMnLCBhc3luYyAoKSA9PiB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QuZ2V0KCcvYXBpL3Byb3Bvc2FscycpOwogICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApOwogICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvQmVJbnN0YW5jZU9mKEFycmF5KTsKICAgIGV4cGVjdChyZXNwb25zZS5ib2R5WzBdLmlkKS50b0JlKCdwMScpOwogIH0pOwoKICBpdCgnUE9TVCAvYXBpL3Byb3Bvc2Fscy86aWQvdm90ZSBzaG91bGQgdXBkYXRlIHRoZSB2b3RlIGNvdW50JywgYXN5bmMgKCkgPT4gewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0CiAgICAgIC5wb3N0KCcvYXBpL3Byb3Bvc2Fscy9wMS92b3RlJykKICAgICAgLnNlbmQoewogICAgICAgIHZvdGVUeXBlOiAnZm9yJywKICAgICAgICB2b3RpbmdQb3dlcjogNTAsCiAgICAgICAgdm90ZXJBZGRyZXNzOiAnMHgxMjM0NTY3ODkwYWJjZGVmMTIzNDU2Nzg5MGFiY2RlZjEyMzQ1Njc4JywKICAgICAgfSk7CgogICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApOwogICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkudm90ZXNGb3IpLnRvQmUoMTUwKTsKICB9KTsKfSk7CmA7CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIHRva2VuX2Rpc3RyaWJ1dGlvbi50ZXN0LnRzIC0gRml4ZWQgdG8gd29yayB3aXRoIGN1cnJlbnQgcm91dGUKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpjb25zdCB0b2tlbkRpc3RUZXN0ID0gYGltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCB2aSwgYmVmb3JlRWFjaCB9IGZyb20gJ3ZpdGVzdCc7CmltcG9ydCBzdXBlcnRlc3QgZnJvbSAnc3VwZXJ0ZXN0JzsKaW1wb3J0IGFwcCBmcm9tICcuLi9pbmRleCc7CmltcG9ydCBkYiBmcm9tICcuLi9kYXRhYmFzZSc7CgovLyBNb2NrIHRoZSBkYXRhYmFzZQp2aS5tb2NrKCcuLi9kYXRhYmFzZScpOwoKLy8gTW9jayBheGlvcyBmb3IgdG9rZW4gcmV3YXJkIEFQSSBjYWxsCnZpLm1vY2soJ2F4aW9zJywgKCkgPT4gKHsKICBkZWZhdWx0OiB7CiAgICBwb3N0OiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsKICAgICAgZGF0YTogewogICAgICAgIG5ld0JhbGFuY2U6IDEwMTAwMCwKICAgICAgICB0cmFuc2FjdGlvbklkOiAndHgtdGVzdC0xMjMnLAogICAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgIH0sCiAgICB9KSwKICB9LAp9KSk7CgovLyBNb2NrIHV1aWQKdmkubW9jaygndXVpZCcsICgpID0+ICh7CiAgdjQ6ICgpID0+ICd0ZXN0LXV1aWQtMTIzNCcsCn0pKTsKCmNvbnN0IHJlcXVlc3QgPSBzdXBlcnRlc3QoYXBwKTsKCmNvbnN0IE5PVyA9IERhdGUubm93KCk7CmNvbnN0IE9ORV9ZRUFSID0gMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMDsKCmNvbnN0IG1vY2tHcm91cCA9IHsKICBpZDogJzEnLAogIGdyb3VwTmFtZTogJ0ZvdW5kZXJzICYgQ29yZSBUZWFtJywKICBjbGFpbWVkOiA1MDAwMDAsCiAgdG90YWxUb2tlbnM6IDIwMDAwMDAwLAp9OwoKY29uc3QgbW9ja1Zlc3RpbmdTY2hlZHVsZSA9IHsKICBpZDogJ3Zlc3QtMScsCiAgdXNlcl9pZDogJ3VzZXItMScsCiAgZ3JvdXBfaWQ6ICcxJywKICB0b3RhbF90b2tlbnM6IDIwMDAwMCwKICBjbGFpbWVkX3Rva2VuczogMCwKICBzdGFydF9kYXRlOiBuZXcgRGF0ZShOT1cgLSBPTkVfWUVBUikudG9JU09TdHJpbmcoKSwKICBlbmRfZGF0ZTogbmV3IERhdGUoTk9XICsgT05FX1lFQVIpLnRvSVNPU3RyaW5nKCksCiAgY2xpZmZfZGF0ZTogbnVsbCwKICBjbGlmZl9wZXJjZW50YWdlOiAwLAp9OwoKZGVzY3JpYmUoJ1Rva2VuIERpc3RyaWJ1dGlvbiBBUEknLCAoKSA9PiB7CiAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICBsZXQgZ3JvdXBJbkRiID0geyAuLi5tb2NrR3JvdXAgfTsKICAgIGxldCBzY2hlZHVsZUluRGIgPSB7IC4uLm1vY2tWZXN0aW5nU2NoZWR1bGUgfTsKCiAgICB2aS5tb2NrZWQoZGIpLm1vY2tJbXBsZW1lbnRhdGlvbigodGFibGVOYW1lOiBzdHJpbmcpID0+IHsKICAgICAgaWYgKHRhYmxlTmFtZSA9PT0gJ3Zlc3Rpbmdfc2NoZWR1bGVzJykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB3aGVyZTogdmkuZm4oKS5tb2NrUmV0dXJuVmFsdWUoewogICAgICAgICAgICBmaXJzdDogdmkuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShzY2hlZHVsZUluRGIpLAogICAgICAgICAgICB1cGRhdGU6IHZpLmZuKChkYXRhOiBhbnkpID0+IHsKICAgICAgICAgICAgICBzY2hlZHVsZUluRGIgPSB7IC4uLnNjaGVkdWxlSW5EYiwgLi4uZGF0YSB9OwogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoMSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgfSksCiAgICAgICAgICBmaXJzdDogdmkuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShzY2hlZHVsZUluRGIpLAogICAgICAgICAgc2VsZWN0OiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtzY2hlZHVsZUluRGJdKSwKICAgICAgICB9IGFzIGFueTsKICAgICAgfQogICAgICBpZiAodGFibGVOYW1lID09PSAndmVzdGluZ191bmxvY2tzJykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB3aGVyZTogdmkuZm4oKS5tb2NrUmV0dXJuVmFsdWUoewogICAgICAgICAgICBzZWxlY3Q6IHZpLmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pLAogICAgICAgICAgICBvcmRlckJ5OiB2aS5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7CiAgICAgICAgICAgICAgc2VsZWN0OiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSwKICAgICAgICAgICAgfSksCiAgICAgICAgICB9KSwKICAgICAgICAgIGluc2VydDogdmkuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbMV0pLAogICAgICAgICAgc2VsZWN0OiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSwKICAgICAgICB9IGFzIGFueTsKICAgICAgfQogICAgICAvLyBEZWZhdWx0OiB0b2tlbl9kaXN0cmlidXRpb25fZ3JvdXBzIHRhYmxlCiAgICAgIHJldHVybiB7CiAgICAgICAgc2VsZWN0OiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtncm91cEluRGJdKSwKICAgICAgICB3aGVyZTogdmkuZm4oKS5tb2NrUmV0dXJuVmFsdWUoewogICAgICAgICAgZmlyc3Q6IHZpLmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoZ3JvdXBJbkRiKSwKICAgICAgICAgIHVwZGF0ZTogdmkuZm4oKGRhdGE6IGFueSkgPT4gewogICAgICAgICAgICBncm91cEluRGIgPSB7IC4uLmdyb3VwSW5EYiwgLi4uZGF0YSB9OwogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKDEpOwogICAgICAgICAgfSksCiAgICAgICAgfSksCiAgICAgICAgZmlyc3Q6IHZpLmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoZ3JvdXBJbkRiKSwKICAgICAgICB1cGRhdGU6IHZpLmZuKChkYXRhOiBhbnkpID0+IHsKICAgICAgICAgIGdyb3VwSW5EYiA9IHsgLi4uZ3JvdXBJbkRiLCAuLi5kYXRhIH07CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKDEpOwogICAgICAgIH0pLAogICAgICB9IGFzIGFueTsKICAgIH0pOwogIH0pOwoKICBpdCgnR0VUIC9hcGkvdG9rZW4tZGlzdHJpYnV0aW9uIHNob3VsZCByZXR1cm4gYSBsaXN0IG9mIGdyb3VwcycsIGFzeW5jICgpID0+IHsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdC5nZXQoJy9hcGkvdG9rZW4tZGlzdHJpYnV0aW9uJyk7CiAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7CiAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9CZUluc3RhbmNlT2YoQXJyYXkpOwogICAgZXhwZWN0KHJlc3BvbnNlLmJvZHlbMF0uaWQpLnRvQmUoJzEnKTsKICB9KTsKCiAgaXQoJ1BPU1QgL2FwaS90b2tlbi1kaXN0cmlidXRpb24vOmdyb3VwSWQvY2xhaW0gc2hvdWxkIHVwZGF0ZSB0aGUgY2xhaW1lZCBhbW91bnQnLCBhc3luYyAoKSA9PiB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QKICAgICAgLnBvc3QoJy9hcGkvdG9rZW4tZGlzdHJpYnV0aW9uLzEvY2xhaW0nKQogICAgICAuc2VuZCh7IHVzZXJJZDogJ3VzZXItMScsIGFtb3VudDogMTAwMDAwIH0pOwoKICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTsKICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7CiAgICBleHBlY3QocmVzcG9uc2UuYm9keS5jbGFpbWVkKS50b0JlKDEwMDAwMCk7CiAgfSk7Cn0pOwpgOwoKLy8gV3JpdGUgZmlsZXMKZnMud3JpdGVGaWxlU3luYygnYmFja2VuZC9zcmMvcm91dGVzL3Byb3Bvc2Fscy50ZXN0LnRzJywgcHJvcG9zYWxzVGVzdCk7CmNvbnNvbGUubG9nKCdXUklUVEVOOiBiYWNrZW5kL3NyYy9yb3V0ZXMvcHJvcG9zYWxzLnRlc3QudHMnKTsKCmZzLndyaXRlRmlsZVN5bmMoJ2JhY2tlbmQvc3JjL3JvdXRlcy90b2tlbl9kaXN0cmlidXRpb24udGVzdC50cycsIHRva2VuRGlzdFRlc3QpOwpjb25zb2xlLmxvZygnV1JJVFRFTjogYmFja2VuZC9zcmMvcm91dGVzL3Rva2VuX2Rpc3RyaWJ1dGlvbi50ZXN0LnRzJyk7Cgpjb25zb2xlLmxvZygnRG9uZSAtIGJvdGggdGVzdCBmaWxlcyBmaXhlZC4nKTsK\")))\r\n"}