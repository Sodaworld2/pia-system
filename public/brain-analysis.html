<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brain Architecture Analysis — Mic's 4-Layer Model vs. Research</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #0a0a0a;
    color: #ccc;
    font-family: 'Outfit', sans-serif;
    line-height: 1.7;
    overflow-x: hidden;
  }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: #111; }
  ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }

  /* Ambient glow */
  .glow-top {
    position: fixed;
    top: -200px;
    left: 50%;
    transform: translateX(-50%);
    width: 800px;
    height: 600px;
    background: radial-gradient(ellipse, rgba(200,168,78,0.06) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
  }

  /* Header */
  header {
    position: relative;
    z-index: 1;
    text-align: center;
    padding: 80px 20px 40px;
    border-bottom: 1px solid rgba(200,168,78,0.1);
  }

  header .label {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 11px;
    letter-spacing: 5px;
    text-transform: uppercase;
    color: #C8A84E;
    margin-bottom: 16px;
  }

  header h1 {
    font-family: 'Space Grotesk', sans-serif;
    font-size: clamp(28px, 4vw, 48px);
    font-weight: 800;
    color: #fff;
    margin-bottom: 12px;
    line-height: 1.2;
  }

  header h1 span { color: #C8A84E; }

  header .subtitle {
    font-size: 16px;
    color: #777;
    max-width: 640px;
    margin: 0 auto;
  }

  /* Sections */
  section {
    position: relative;
    z-index: 1;
    max-width: 960px;
    margin: 0 auto;
    padding: 60px 24px;
  }

  section + section {
    border-top: 1px solid rgba(255,255,255,0.04);
  }

  .section-number {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 11px;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: #C8A84E;
    margin-bottom: 8px;
  }

  h2 {
    font-family: 'Space Grotesk', sans-serif;
    font-size: clamp(22px, 3vw, 32px);
    font-weight: 700;
    color: #fff;
    margin-bottom: 24px;
    line-height: 1.3;
  }

  h3 {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 18px;
    font-weight: 600;
    color: #e0d4b0;
    margin-top: 32px;
    margin-bottom: 12px;
  }

  p {
    margin-bottom: 16px;
    color: #aaa;
    font-size: 15px;
  }

  strong { color: #ddd; }

  /* Cards */
  .card {
    background: #111111;
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 12px;
    padding: 28px;
    margin-bottom: 20px;
    transition: border-color 0.3s;
  }

  .card:hover {
    border-color: rgba(200,168,78,0.2);
  }

  .card-title {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 8px;
  }

  .card-gold .card-title { color: #C8A84E; }
  .card-green .card-title { color: #4ade80; }
  .card-red .card-title { color: #f87171; }
  .card-purple .card-title { color: #a78bfa; }
  .card-blue .card-title { color: #60a5fa; }

  .card p:last-child { margin-bottom: 0; }

  /* Verdict box */
  .verdict-box {
    background: linear-gradient(135deg, rgba(200,168,78,0.08), rgba(200,168,78,0.02));
    border: 1px solid rgba(200,168,78,0.25);
    border-radius: 16px;
    padding: 36px;
    margin: 24px 0;
  }

  .verdict-score {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 64px;
    font-weight: 800;
    color: #C8A84E;
    line-height: 1;
    margin-bottom: 8px;
  }

  .verdict-label {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 14px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: #C8A84E;
    margin-bottom: 20px;
  }

  /* Mapping grid */
  .mapping-row {
    display: grid;
    grid-template-columns: 1fr 60px 1fr;
    gap: 12px;
    align-items: center;
    margin-bottom: 16px;
  }

  .mapping-left, .mapping-right {
    background: #111;
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 10px;
    padding: 16px 20px;
  }

  .mapping-left {
    border-left: 3px solid #C8A84E;
  }

  .mapping-right {
    border-left: 3px solid #a78bfa;
  }

  .mapping-arrow {
    text-align: center;
    font-size: 24px;
    color: rgba(200,168,78,0.4);
  }

  .mapping-label {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 13px;
    font-weight: 700;
    margin-bottom: 4px;
  }

  .mapping-left .mapping-label { color: #C8A84E; }
  .mapping-right .mapping-label { color: #a78bfa; }

  .mapping-desc {
    font-size: 12px;
    color: #888;
    margin: 0;
  }

  /* Research backing list */
  .research-item {
    display: flex;
    gap: 16px;
    padding: 16px 0;
    border-bottom: 1px solid rgba(255,255,255,0.04);
  }

  .research-item:last-child { border-bottom: none; }

  .research-tag {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #C8A84E;
    background: rgba(200,168,78,0.1);
    padding: 3px 10px;
    border-radius: 4px;
    white-space: nowrap;
    height: fit-content;
    flex-shrink: 0;
  }

  .research-text {
    font-size: 13px;
    color: #999;
    margin: 0;
  }

  .research-text strong {
    color: #ccc;
    font-size: 14px;
    display: block;
    margin-bottom: 4px;
  }

  /* Gap items */
  .gap-item {
    display: flex;
    gap: 16px;
    align-items: flex-start;
    margin-bottom: 20px;
  }

  .gap-icon {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 16px;
  }

  .gap-icon.warning {
    background: rgba(245,158,11,0.1);
    border: 1px solid rgba(245,158,11,0.3);
    color: #fbbf24;
  }

  .gap-icon.critical {
    background: rgba(239,68,68,0.1);
    border: 1px solid rgba(239,68,68,0.3);
    color: #f87171;
  }

  .gap-icon.suggest {
    background: rgba(96,165,250,0.1);
    border: 1px solid rgba(96,165,250,0.3);
    color: #60a5fa;
  }

  .gap-title {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 15px;
    font-weight: 600;
    color: #ddd;
    margin-bottom: 4px;
  }

  .gap-text {
    font-size: 13px;
    color: #888;
    margin: 0;
  }

  /* Evolution steps */
  .evolution-step {
    position: relative;
    padding-left: 40px;
    margin-bottom: 28px;
  }

  .evolution-step::before {
    content: '';
    position: absolute;
    left: 14px;
    top: 28px;
    bottom: -28px;
    width: 1px;
    background: rgba(200,168,78,0.15);
  }

  .evolution-step:last-child::before { display: none; }

  .evolution-number {
    position: absolute;
    left: 0;
    top: 0;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: rgba(200,168,78,0.1);
    border: 1px solid rgba(200,168,78,0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 12px;
    font-weight: 700;
    color: #C8A84E;
  }

  .evolution-title {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 16px;
    font-weight: 600;
    color: #e0d4b0;
    margin-bottom: 6px;
  }

  .evolution-text {
    font-size: 13px;
    color: #888;
    margin: 0;
  }

  /* SVG section */
  .diagram-container {
    margin: 32px 0;
    text-align: center;
    overflow-x: auto;
  }

  .diagram-container svg {
    max-width: 100%;
    height: auto;
  }

  /* Footer */
  footer {
    text-align: center;
    padding: 40px 20px;
    border-top: 1px solid rgba(255,255,255,0.04);
    color: #444;
    font-size: 12px;
  }

  /* Responsive */
  @media (max-width: 700px) {
    .mapping-row {
      grid-template-columns: 1fr;
      gap: 4px;
    }
    .mapping-arrow {
      transform: rotate(90deg);
      font-size: 18px;
    }
    section { padding: 40px 16px; }
  }

  /* Highlight text */
  .gold { color: #C8A84E; }
  .green { color: #4ade80; }
  .red { color: #f87171; }

  /* Inline badge */
  .badge {
    display: inline-block;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 10px;
    letter-spacing: 1px;
    text-transform: uppercase;
    padding: 2px 8px;
    border-radius: 4px;
    margin-right: 6px;
  }
  .badge-gold { background: rgba(200,168,78,0.15); color: #C8A84E; border: 1px solid rgba(200,168,78,0.25); }
  .badge-green { background: rgba(74,222,128,0.1); color: #4ade80; border: 1px solid rgba(74,222,128,0.2); }
  .badge-red { background: rgba(248,113,113,0.1); color: #f87171; border: 1px solid rgba(248,113,113,0.2); }
  .badge-purple { background: rgba(167,139,250,0.1); color: #a78bfa; border: 1px solid rgba(167,139,250,0.2); }
  .badge-blue { background: rgba(96,165,250,0.1); color: #60a5fa; border: 1px solid rgba(96,165,250,0.2); }

  /* Comparison table */
  .compare-table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    font-size: 13px;
  }
  .compare-table th {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 11px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #C8A84E;
    text-align: left;
    padding: 12px 16px;
    border-bottom: 1px solid rgba(200,168,78,0.2);
  }
  .compare-table td {
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255,255,255,0.04);
    color: #999;
    vertical-align: top;
  }
  .compare-table tr:hover td {
    background: rgba(200,168,78,0.02);
  }
</style>
</head>
<body>

<div class="glow-top"></div>

<!-- ===== HEADER ===== -->
<header>
  <div class="label">Architectural Analysis</div>
  <h1>Mic's 4-Layer Brain <span>vs. The Research</span></h1>
  <p class="subtitle">A direct, evidence-grounded comparison of the "Inside Michael's AI Brain" diagram against 20 research domains, 75+ academic sources, and the Deep Research 3-Pillar blueprint.</p>
</header>


<!-- ===== SECTION A: THE VERDICT ===== -->
<section>
  <div class="section-number">Section A</div>
  <h2>The Verdict</h2>

  <div class="verdict-box">
    <div class="verdict-score">78%</div>
    <div class="verdict-label">Architecturally Sound</div>
    <p style="color:#ccc; font-size:16px; margin-bottom:16px;">Mic's 4-layer architecture is <strong style="color:#C8A84E;">structurally valid and well-reasoned</strong>. The layered hierarchy -- purpose driving strategy driving execution grounded in memory -- maps to real cognitive science and established AI agent patterns. It is not a naive diagram. It reflects genuine architectural intuition about how agency works.</p>
    <p style="color:#999;">But there are gaps. The research calls for components that have no explicit home in the 4-layer model. The most critical: a safety/ethics boundary layer, an evidence ingestion pipeline, a feedback loop, and an identity coherence mechanism. These are not small things. They are the difference between a system that works in a demo and a system that works in production.</p>
  </div>

  <h3>The honest breakdown</h3>

  <div class="card card-green">
    <div class="card-title">What Mic got right</div>
    <p>The hierarchical ordering -- purpose at top, memory at bottom -- mirrors Kahneman's System 1/System 2, McAdams' three levels of personality (narrative identity > characteristic adaptations > traits), and the Deep Research report's own recommendation for separating "what" the system knows from "why" it acts. Placing "Dreams & Values" as the apex layer is not soft thinking -- it directly maps to Self-Determination Theory's core finding that autonomous motivation produces better outcomes than extrinsic motivation. The research agrees: values should drive behavior, not the other way around.</p>
  </div>

  <div class="card card-red">
    <div class="card-title">What the research adds that Mic's diagram lacks</div>
    <p>The Deep Research report proposes three pillars: <strong>Evidence Layer</strong> (what is known), <strong>Interpretation Layer</strong> (what it means), and <strong>Policy Layer</strong> (how the agent should behave). Mic's model captures the Interpretation and Policy concepts well (Mind Layer + Brain Layer), but the Evidence Layer -- the raw, immutable, provenance-tracked data pipeline -- is compressed into "Memory Bank" at the bottom. The research strongly argues that memory and evidence are different things. Memory can be reconstructed, reweighted, or lost. Evidence is immutable. This distinction matters for auditability, trust, and legal compliance (POPIA, EU AI Act). Additionally, there is no visible safety/ethics layer -- Constitutional AI, OWASP defenses, MITRE threat modeling -- and no feedback loop showing how the system improves.</p>
  </div>

  <div class="card card-gold">
    <div class="card-title">Net assessment</div>
    <p>The 4-layer model is a <strong>strong conceptual foundation</strong> that needs three things added to become a production architecture: (1) a safety wrapper, (2) an ingestion pipeline, and (3) a learning loop. The core hierarchy can stay. The vision is sound. The engineering needs the additions below.</p>
  </div>
</section>


<!-- ===== SECTION B: WHAT MAPS PERFECTLY ===== -->
<section>
  <div class="section-number">Section B</div>
  <h2>What Maps Perfectly</h2>
  <p>Each of Mic's 4 layers has direct support from the research. Here is the mapping.</p>

  <!-- PURPOSE CORE -->
  <h3><span class="badge badge-gold">Layer 1</span> Purpose Core &rarr; Research Equivalents</h3>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Purpose Core</div>
      <div class="mapping-desc">"Dreams & Values" -- the WHY layer</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">Self-Determination Theory (SDT)</div>
      <div class="mapping-desc">Autonomy, Competence, Relatedness -- the three innate needs that drive all motivation (Deci & Ryan, 2000)</div>
    </div>
  </div>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Purpose Core</div>
      <div class="mapping-desc">"Dreams & Values" -- moral compass</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">Moral Foundations Theory (MFT)</div>
      <div class="mapping-desc">Care, Fairness, Loyalty, Authority, Sanctity, Liberty -- the weighted moral profile that guides ethical decisions (Haidt & Graham, 2009)</div>
    </div>
  </div>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Purpose Core</div>
      <div class="mapping-desc">"Dreams" -- the story that gives life meaning</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">Narrative Identity (McAdams)</div>
      <div class="mapping-desc">Identity as an internalized, evolving life story with themes of redemption, agency, and purpose (McAdams, 2001)</div>
    </div>
  </div>

  <p style="margin-top:16px;">The Purpose Core is Mic's strongest layer from a research standpoint. SDT's finding that autonomous motivation outperforms extrinsic motivation validates putting purpose at the top. MFT gives it ethical weight. Narrative Identity gives it temporal depth -- dreams are not static, they are stories being lived. The Deep Research report calls this the intersection of "motivational structure" and "moral framework."</p>

  <!-- MIND LAYER -->
  <h3><span class="badge badge-purple">Layer 2</span> Mind Layer &rarr; Research Equivalents</h3>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Story Maker</div>
      <div class="mapping-desc">"Creating Big Ideas" -- narrative synthesis</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">Narrative Identity + LIWC</div>
      <div class="mapping-desc">Life story construction (McAdams) + communication style fingerprinting (Pennebaker, 2010). The Story Maker is where personal mythology meets linguistic style.</div>
    </div>
  </div>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Master Planner</div>
      <div class="mapping-desc">"Connecting Big Plans" -- strategic reasoning</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">System 2 (Kahneman) + Big Five</div>
      <div class="mapping-desc">Deliberate, analytical thinking (Kahneman, 2011). Conscientiousness and Openness from the Big Five shape HOW strategic reasoning unfolds (McCrae & Costa, 1992).</div>
    </div>
  </div>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Master Planner</div>
      <div class="mapping-desc">Strategic synthesis across domains</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">Stanford Generative Agents -- Planning</div>
      <div class="mapping-desc">Park et al. (2023) identified "planning" as one of three critical components for believable agent behavior. The Master Planner IS this planning module.</div>
    </div>
  </div>

  <p style="margin-top:16px;">The Mind Layer maps cleanly to the Deep Research report's "Interpretation Layer" -- the place where raw evidence becomes meaning. The "Story Maker / Master Planner" split is actually more nuanced than the research's single Interpretation Layer. Mic instinctively separated narrative synthesis from strategic planning, which maps to McAdams' distinction between identity (narrative) and characteristic adaptations (strategic goals). That is a real insight.</p>

  <!-- BRAIN LAYER -->
  <h3><span class="badge badge-green">Layer 3</span> Brain Layer &rarr; Research Equivalents</h3>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Leverage Engine</div>
      <div class="mapping-desc">"Finding Smart Shortcuts" -- heuristic optimization</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">Heuristics & Biases (Kahneman/Tversky)</div>
      <div class="mapping-desc">System 1 fast thinking -- representativeness, availability, anchoring (Tversky & Kahneman, 1974). Shortcuts that are efficient but biased.</div>
    </div>
  </div>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Leverage Engine</div>
      <div class="mapping-desc">Pattern-matched efficiency</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">Habit Research (Wood & Runger)</div>
      <div class="mapping-desc">Context-cued automatic responses. Habit strength as a function of repetition, context stability, and reward (Wood & Runger, 2016).</div>
    </div>
  </div>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Action Station</div>
      <div class="mapping-desc">"Building & Doing Stuff" -- execution</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">OpenClaw Agent Runtime</div>
      <div class="mapping-desc">Events + Agents + State + Loop. The Action Station is the agent runtime -- receiving inputs (heartbeats, crons, messages, webhooks), processing, persisting state.</div>
    </div>
  </div>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Action Station</div>
      <div class="mapping-desc">Tool use and real-world execution</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">Deep Research "Policy Layer"</div>
      <div class="mapping-desc">The Policy Layer constrains HOW the agent acts -- tool permissions, action gating, and deterministic safeguards. The Action Station is where policy meets execution.</div>
    </div>
  </div>

  <p style="margin-top:16px;">The Brain Layer is where Mic's "Leverage Engine / Action Station" split reveals itself as a System 1 / System 2 execution pair. The Leverage Engine handles fast, heuristic-based shortcuts. The Action Station handles deliberate tool use and real-world action. This mirrors Kahneman's dual-process theory applied to an execution context -- and it also maps directly to the OpenClaw pattern of "nothing is thinking, nothing is deciding, it is inputs, queues, and a loop."</p>

  <!-- MEMORY LAYER -->
  <h3><span class="badge badge-blue">Layer 4</span> Memory Layer &rarr; Research Equivalents</h3>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Memory Bank</div>
      <div class="mapping-desc">"Context & History" -- everything the brain knows</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">RAG + Vector Search + Knowledge Graphs</div>
      <div class="mapping-desc">Hybrid retrieval architecture: vector embeddings (FAISS/HNSW) + structured knowledge graph (Neo4j) + provenance tracking (PROV-O). Lewis et al. (2020), Malkov & Yashunin (2018), W3C (2013).</div>
    </div>
  </div>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Memory Bank</div>
      <div class="mapping-desc">Episodic experience recall</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">Stanford Generative Agents -- Observation + Reflection</div>
      <div class="mapping-desc">Park et al. (2023): "observation" (storing experiences) and "reflection" (synthesizing memories into higher-level insights) are two of three critical agent components.</div>
    </div>
  </div>

  <div class="mapping-row">
    <div class="mapping-left">
      <div class="mapping-label">Memory Bank</div>
      <div class="mapping-desc">Personal identity continuity</div>
    </div>
    <div class="mapping-arrow">&harr;</div>
    <div class="mapping-right">
      <div class="mapping-label">ID-RAG (2025)</div>
      <div class="mapping-desc">Identity Retrieval-Augmented Generation -- grounds an agent's persona in a dynamic, structured identity model. Reduced simulation convergence time 19-58%.</div>
    </div>
  </div>

  <p style="margin-top:16px;">The Memory Bank maps to the largest body of technical research in the knowledge base. RAG, vector search, knowledge graphs, PROV-O provenance -- all of it converges here. But note: the Deep Research report distinguishes between an "Evidence Store" (immutable raw data) and "Claims/Traits" (interpreted, versioned knowledge). Mic's single "Memory Bank" currently merges both.</p>
</section>


<!-- ===== SECTION C: WHAT'S MISSING ===== -->
<section>
  <div class="section-number">Section C</div>
  <h2>What's Missing or Could Be Stronger</h2>
  <p>The research identifies five critical capabilities that do not have an obvious home in the 4-layer model. These are not theoretical concerns -- they are the things that will break the system if absent.</p>

  <div class="gap-item">
    <div class="gap-icon critical">!</div>
    <div>
      <div class="gap-title">1. Ethics/Safety Boundary Layer -- Where Does the Conscience Live?</div>
      <p class="gap-text">The Deep Research report dedicates an entire table (<code>ethics_boundary</code>) and calls Constitutional AI "the mechanism for encoding behavioral rules." OWASP Top 10 for LLMs (2025) lists 10 attack vectors. MITRE ATLAS catalogs 66 adversary techniques. Prompt injection is called "fundamentally unsolved" by the UK NCSC. POPIA classifies behavioral modeling as biometric data -- the strictest protection category in South African law. <strong style="color:#f87171;">None of this has a visible home in Mic's 4 layers.</strong> The Purpose Core contains "Values" but values are aspirational. Safety boundaries are operational -- they must fire BEFORE output, every time, without exception. The research is emphatic: safety is not a sub-component of values. It is a separate enforcement layer.</p>
    </div>
  </div>

  <div class="gap-item">
    <div class="gap-icon critical">!</div>
    <div>
      <div class="gap-title">2. Evidence Ingestion Pipeline -- How Does Raw Data Get In?</div>
      <p class="gap-text">The Deep Research report describes a multi-stage ingestion pipeline: document inventory, normalization, PII/sensitivity classification, data documentation, and governance. The existing brain-diagram.html shows this as a separate "Ingestion" component with arrows flowing into the Evidence Store. Mic's 4-layer model has no ingestion path visible. The Memory Bank stores knowledge, but how does information travel from the real world (emails, conversations, documents, screenshots, voice notes) through quality controls into structured memory? The OpenClaw analysis identifies 5 input types (messages, heartbeats, crons, hooks, webhooks) -- each needs a clean path into the system. Without an explicit ingestion layer, the system either (a) accepts everything uncritically, which is a security disaster, or (b) has an ad hoc process, which is an auditability disaster.</p>
    </div>
  </div>

  <div class="gap-item">
    <div class="gap-icon warning">!</div>
    <div>
      <div class="gap-title">3. Feedback/Learning Loop -- How Does the Brain Improve?</div>
      <p class="gap-text">The Stanford Generative Agents paper (Park et al., 2023) identifies three components: observation, <strong>reflection</strong>, and planning. Reflection -- synthesizing memories into higher-level insights -- is what allows agents to evolve and improve. The Deep Research report's architecture diagram shows a feedback loop from agent output back to claim extraction. The existing brain-diagram.html includes a dashed "feedback loop -- learn from every output" arrow. Mic's 4-layer model has no visible feedback mechanism. Without it, the twin is static: it can retrieve and act, but it cannot learn from its mistakes, update its confidence in claims, or adapt to new information about the person. The research calls this "drift detection" -- and it requires a loop, not just a layer.</p>
    </div>
  </div>

  <div class="gap-item">
    <div class="gap-icon warning">!</div>
    <div>
      <div class="gap-title">4. Identity Coherence -- How Does It Stay "Mic" Across Contexts?</div>
      <p class="gap-text">ID-RAG (2025) was built specifically to solve this: agents lose personality coherence over long interactions. The solution is anchoring retrieval to a structured identity model -- a knowledge graph of core beliefs, traits, and values that is always consulted. Mic's Purpose Core addresses this conceptually (values drive everything), but the research shows it requires a technical mechanism: an identity anchor that persists across sessions, contexts, and platforms. The Big Five personality profile, the MFT moral weights, the narrative identity themes -- these need to be a persistent, always-consulted identity kernel, not just an aspirational layer. Without explicit coherence, the twin will "forget who it is" in long conversations or when switching between domains.</p>
    </div>
  </div>

  <div class="gap-item">
    <div class="gap-icon suggest">?</div>
    <div>
      <div class="gap-title">5. Evidence vs. Interpretation Separation</div>
      <p class="gap-text">The Deep Research report is explicit: "Evidence is immutable; interpretations evolve." Raw snippets are stored as append-only records. Claims and trait inferences are versioned objects. Mic's single "Memory Bank" merges both. This matters because immutable evidence is what makes the system auditable and legally defensible. If interpretations and raw data are mixed, you cannot prove WHY the twin believes something, you cannot trace errors back to their source, and you cannot comply with PROV-O provenance requirements. The research recommends separate stores: an Evidence Store (immutable) and a Claims/Traits Store (versioned, with provenance links back to evidence).</p>
    </div>
  </div>
</section>


<!-- ===== SECTION D: RESEARCH BACKING ===== -->
<section>
  <div class="section-number">Section D</div>
  <h2>Research Backing by Layer</h2>
  <p>For each of Mic's 4 layers, the specific papers and concepts that validate it.</p>

  <h3><span class="badge badge-gold">Purpose Core</span> "Dreams & Values"</h3>
  <div class="research-item">
    <div class="research-tag">SDT</div>
    <p class="research-text"><strong>Deci & Ryan (2000) -- Self-Determination Theory</strong>Autonomous motivation (acting from values and interest) produces better performance, persistence, and well-being than extrinsic motivation. Placing values at the top of the hierarchy is psychologically correct.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">MFT</div>
    <p class="research-text"><strong>Haidt & Graham (2009) -- Moral Foundations Theory</strong>People's moral intuitions are structured around 5-6 innate foundations. A person's unique moral profile (which foundations they weight most) is a stable predictor of ethical decision-making. This gives the Purpose Core operational content beyond abstract "values."</p>
  </div>
  <div class="research-item">
    <div class="research-tag">Narrative</div>
    <p class="research-text"><strong>McAdams (2001) -- Narrative Identity</strong>Identity is an internalized life story integrating past, present, and imagined future. The Purpose Core's "Dreams" directly maps to what McAdams calls the "imagined future" component of narrative identity.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">Agents</div>
    <p class="research-text"><strong>Park et al. (2023) -- Stanford Generative Agents</strong>The agents that produced the most believable behavior had the most coherent initial descriptions (values, goals, personality). Purpose-first design produces more coherent agents.</p>
  </div>

  <h3><span class="badge badge-purple">Mind Layer</span> "Strategic Synthesizer"</h3>
  <div class="research-item">
    <div class="research-tag">Cognition</div>
    <p class="research-text"><strong>Kahneman (2011) -- System 2 / Deliberate Thinking</strong>The Mind Layer IS System 2 -- slow, deliberate, analytical reasoning that intervenes when intuition is insufficient. The "Master Planner" is strategic System 2.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">Big Five</div>
    <p class="research-text"><strong>McCrae & Costa (1992) -- Five-Factor Model</strong>Openness to Experience shapes creative idea generation (Story Maker). Conscientiousness shapes goal-directed planning (Master Planner). The Big Five parameterize how the Mind Layer operates.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">LIWC</div>
    <p class="research-text"><strong>Pennebaker (2010) -- LIWC</strong>Communication style fingerprinting gives the Story Maker its "voice" -- the characteristic word-category distributions that make output sound like a specific person rather than a generic AI.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">Deep Research</div>
    <p class="research-text"><strong>Deep Research Report -- Interpretation Layer</strong>The report calls for translating evidence into "stable/unstable traits (values, heuristics, triggers, boundaries) with confidence levels and expiry rules." That is precisely what the Mind Layer does.</p>
  </div>

  <h3><span class="badge badge-green">Brain Layer</span> "Execution Engine"</h3>
  <div class="research-item">
    <div class="research-tag">Heuristics</div>
    <p class="research-text"><strong>Tversky & Kahneman (1974) -- Heuristics and Biases</strong>The Leverage Engine's "smart shortcuts" are precisely the cognitive heuristics studied by Kahneman and Tversky. The research validates this as a real cognitive mechanism -- but also warns these shortcuts produce systematic biases.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">Habits</div>
    <p class="research-text"><strong>Wood & Runger (2016) -- Psychology of Habit</strong>Context-cued automatic responses. The Leverage Engine should encode habit loops (cue-routine-reward) as the person's default, fast-path behaviors.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">OpenClaw</div>
    <p class="research-text"><strong>OpenClaw Architecture -- Agent Runtime</strong>Events + Agents + State + Loop. The Action Station maps directly to the OpenClaw execution model: nothing thinks, nothing decides -- inputs enter queues, agents process them, state persists.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">Policy</div>
    <p class="research-text"><strong>Deep Research Report -- Policy Layer</strong>Structured constraints: ethical boundaries, tool-permission gating, "don't guess" requirements. The Action Station must enforce these at execution time.</p>
  </div>

  <h3><span class="badge badge-blue">Memory Layer</span> "Memory Graph System"</h3>
  <div class="research-item">
    <div class="research-tag">RAG</div>
    <p class="research-text"><strong>Lewis et al. (2020) -- Retrieval-Augmented Generation</strong>The foundational paper: combine parametric memory (trained weights) with non-parametric memory (retrieved documents) for grounded, factual outputs.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">Vector</div>
    <p class="research-text"><strong>Malkov & Yashunin (2018) -- HNSW</strong>Hierarchical Navigable Small World graphs for approximate nearest neighbor search. Supports dynamic updates (new knowledge inserted continuously) -- essential for a living memory system.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">GraphRAG</div>
    <p class="research-text"><strong>Edge et al. (2024) -- Microsoft GraphRAG</strong>Knowledge graph + vector search hybrid. For complex personal knowledge, graph traversal catches relational context that pure vector search misses.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">PROV-O</div>
    <p class="research-text"><strong>W3C (2013) -- PROV-O Provenance Ontology</strong>Every claim in memory must have provenance: what source, what extraction process, what confidence. Without this, the twin cannot explain itself and cannot be audited.</p>
  </div>
  <div class="research-item">
    <div class="research-tag">ID-RAG</div>
    <p class="research-text"><strong>ID-RAG (2025) -- Identity RAG</strong>Grounds persona in a dynamic, structured identity model stored as a knowledge graph. Agents using ID-RAG achieved higher identity recall and 19-58% faster convergence.</p>
  </div>
</section>


<!-- ===== SECTION E: SUGGESTED EVOLUTION ===== -->
<section>
  <div class="section-number">Section E</div>
  <h2>Suggested Evolution</h2>
  <p>Three additions to complete the architecture. These do not replace Mic's 4 layers -- they augment them. Think of it as: the 4 layers are the brain. These additions are the skull (protection), the nervous system (input), and the spine (feedback).</p>

  <div class="evolution-step">
    <div class="evolution-number">1</div>
    <div class="evolution-title">Add a Safety Shell (wraps the entire system)</div>
    <p class="evolution-text">Not a 5th layer. A <strong>wrapper</strong> that surrounds all 4 layers. Everything entering or leaving the brain passes through the Safety Shell. Inbound: input validation, prompt injection detection, PII classification, access control checks. Outbound: output filtering, boundary enforcement, privacy redaction, confidence thresholds. Research basis: Constitutional AI (Bai et al., 2022), OWASP Top 10 for LLMs (2025), MITRE ATLAS (2025), POPIA Section 71 (automated decision-making), EU AI Act Article 50 (transparency). The Shell also holds the twin's "constitution" -- the hard rules that cannot be overridden. It is the conscience that fires before any output reaches the world.</p>
  </div>

  <div class="evolution-step">
    <div class="evolution-number">2</div>
    <div class="evolution-title">Add an Ingestion Pipeline (feeds into Memory Layer)</div>
    <p class="evolution-text">A visible path from the real world into the Memory Bank. Five input types (from OpenClaw analysis): human messages, scheduled heartbeats, cron jobs, internal hooks, external webhooks. Each input goes through: normalization, sensitivity tagging, consent-scope checking, and quality validation before reaching the Memory Layer. The pipeline also separates raw evidence (immutable) from extracted claims (versioned). Research basis: PROV-O entity-activity-agent model (W3C, 2013), Deep Research ingestion pipeline specification, ISO 27701 privacy-by-design requirements. This turns the Memory Bank from a black box into an auditable, governed data pipeline.</p>
  </div>

  <div class="evolution-step">
    <div class="evolution-number">3</div>
    <div class="evolution-title">Add a Learning Loop (connects Output back to Memory)</div>
    <p class="evolution-text">A feedback path from the Brain Layer's outputs back through the Memory Layer. Every action the twin takes generates a new observation. That observation is ingested (through the pipeline) as new evidence. Claims are updated, confidence scores recalculated, contradictions flagged. The loop enables: drift detection (the person has changed), error correction (the twin was wrong about something), and memory consolidation (Stanford Generative Agents' "reflection" mechanism). Research basis: Park et al. (2023) observation-reflection-planning cycle, Deep Research architecture flow diagram (Agent Response Generator -> Audit Log -> Feedback Signals -> Claim Extraction), Wood & Runger (2016) habit formation through repetition tracking.</p>
  </div>

  <h3 style="margin-top:40px;">One more thing: Identity Kernel</h3>
  <p>Inside the Purpose Core, add an explicit <strong>Identity Kernel</strong> -- a compact, always-loaded data structure containing: Big Five personality scores, MFT moral foundation weights, SDT motivation profile, core narrative identity themes, and LIWC voice signature. This kernel is consulted on every single response, not just when "values" are relevant. It is the mathematical identity of the person. ID-RAG (2025) proved this mechanism reduces persona drift by 19-58%. The kernel sits inside the Purpose Core but is technically a persistent data structure referenced by all layers.</p>
</section>


<!-- ===== SECTION F: THE FINAL DIAGRAM ===== -->
<section>
  <div class="section-number">Section F</div>
  <h2>The Final Diagram</h2>
  <p>Mic's 4-layer model, enhanced with research findings. The original structure is preserved. Additions are annotated in gold.</p>

  <div class="diagram-container">
    <svg viewBox="0 0 900 1100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <filter id="glow"><feGaussianBlur stdDeviation="4" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        <filter id="softglow"><feGaussianBlur stdDeviation="8"/></filter>
        <marker id="arrowGold" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
          <path d="M0 0 L10 3.5 L0 7z" fill="rgba(200,168,78,0.5)"/>
        </marker>
        <marker id="arrowWhite" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
          <path d="M0 0 L10 3.5 L0 7z" fill="rgba(255,255,255,0.25)"/>
        </marker>
        <marker id="arrowRed" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
          <path d="M0 0 L10 3.5 L0 7z" fill="rgba(248,113,113,0.5)"/>
        </marker>
      </defs>

      <!-- Background -->
      <rect width="900" height="1100" fill="#0a0a0a"/>

      <!-- Ambient glow behind brain -->
      <ellipse cx="450" cy="520" rx="280" ry="380" fill="rgba(200,168,78,0.02)" filter="url(#softglow)"/>

      <!-- Title -->
      <text x="450" y="36" text-anchor="middle" fill="#666" font-family="Space Grotesk" font-size="11" font-weight="600" letter-spacing="4">MIC'S 4-LAYER BRAIN — RESEARCH-ENHANCED</text>

      <!-- ====== SAFETY SHELL (outer wrapper) ====== -->
      <rect x="110" y="60" width="680" height="870" rx="24" fill="none" stroke="rgba(248,113,113,0.15)" stroke-width="2" stroke-dasharray="8,6"/>
      <rect x="114" y="64" width="672" height="862" rx="22" fill="none" stroke="rgba(248,113,113,0.06)" stroke-width="1"/>

      <!-- Safety Shell label - top -->
      <rect x="340" y="50" width="220" height="22" rx="11" fill="#0a0a0a"/>
      <text x="450" y="65" text-anchor="middle" fill="#f87171" font-family="Space Grotesk" font-size="10" font-weight="700" letter-spacing="2">SAFETY SHELL (NEW)</text>

      <!-- Safety Shell annotations - left -->
      <text x="100" y="200" text-anchor="end" fill="#b04040" font-family="Outfit" font-size="8">Constitutional AI</text>
      <text x="100" y="212" text-anchor="end" fill="#b04040" font-family="Outfit" font-size="8">OWASP Top 10</text>
      <text x="100" y="224" text-anchor="end" fill="#b04040" font-family="Outfit" font-size="8">MITRE ATLAS</text>
      <text x="100" y="236" text-anchor="end" fill="#b04040" font-family="Outfit" font-size="8">POPIA S.71</text>
      <text x="100" y="248" text-anchor="end" fill="#b04040" font-family="Outfit" font-size="8">EU AI Act Art.50</text>
      <line x1="104" y1="220" x2="128" y2="220" stroke="rgba(248,113,113,0.2)" stroke-width="1"/>

      <!-- Safety Shell annotations - right -->
      <text x="800" y="200" fill="#b04040" font-family="Outfit" font-size="8">Input validation</text>
      <text x="800" y="212" fill="#b04040" font-family="Outfit" font-size="8">Output filtering</text>
      <text x="800" y="224" fill="#b04040" font-family="Outfit" font-size="8">PII redaction</text>
      <text x="800" y="236" fill="#b04040" font-family="Outfit" font-size="8">Prompt injection defense</text>
      <text x="800" y="248" fill="#b04040" font-family="Outfit" font-size="8">Boundary enforcement</text>
      <line x1="772" y1="220" x2="796" y2="220" stroke="rgba(248,113,113,0.2)" stroke-width="1"/>


      <!-- ====== LAYER 1: PURPOSE CORE ====== -->
      <rect x="200" y="95" width="500" height="140" rx="16" fill="rgba(200,168,78,0.04)" stroke="rgba(200,168,78,0.25)" stroke-width="1.5"/>

      <!-- Subtle inner glow -->
      <ellipse cx="450" cy="165" rx="180" ry="50" fill="rgba(200,168,78,0.03)" filter="url(#softglow)"/>

      <text x="450" y="122" text-anchor="middle" fill="#C8A84E" font-family="Space Grotesk" font-size="16" font-weight="800">PURPOSE CORE</text>
      <text x="450" y="140" text-anchor="middle" fill="rgba(200,168,78,0.5)" font-family="Outfit" font-size="10">Dreams &amp; Values</text>

      <!-- Identity Kernel (NEW) -->
      <rect x="290" y="152" width="320" height="68" rx="10" fill="rgba(200,168,78,0.06)" stroke="rgba(200,168,78,0.15)" stroke-width="1" stroke-dasharray="4,3"/>
      <text x="450" y="170" text-anchor="middle" fill="#C8A84E" font-family="Space Grotesk" font-size="10" font-weight="700" letter-spacing="1">IDENTITY KERNEL (NEW)</text>
      <text x="450" y="185" text-anchor="middle" fill="rgba(200,168,78,0.4)" font-family="Outfit" font-size="8">Big Five + MFT weights + SDT profile</text>
      <text x="450" y="197" text-anchor="middle" fill="rgba(200,168,78,0.4)" font-family="Outfit" font-size="8">Narrative themes + LIWC voice signature</text>
      <text x="450" y="209" text-anchor="middle" fill="rgba(200,168,78,0.4)" font-family="Outfit" font-size="8">Always loaded. Always consulted. Every response.</text>

      <!-- Research tags for Purpose Core -->
      <text x="215" y="122" fill="rgba(200,168,78,0.3)" font-family="Outfit" font-size="7">SDT</text>
      <text x="215" y="132" fill="rgba(200,168,78,0.3)" font-family="Outfit" font-size="7">MFT</text>
      <text x="215" y="142" fill="rgba(200,168,78,0.3)" font-family="Outfit" font-size="7">McAdams</text>

      <!-- Arrow down -->
      <line x1="450" y1="235" x2="450" y2="265" stroke="rgba(255,255,255,0.15)" stroke-width="1.5" marker-end="url(#arrowWhite)"/>
      <text x="465" y="255" fill="#555" font-family="Outfit" font-size="7">drives</text>


      <!-- ====== LAYER 2: MIND LAYER ====== -->
      <rect x="200" y="270" width="500" height="145" rx="16" fill="rgba(139,92,246,0.04)" stroke="rgba(139,92,246,0.25)" stroke-width="1.5"/>

      <text x="450" y="297" text-anchor="middle" fill="#a78bfa" font-family="Space Grotesk" font-size="16" font-weight="800">MIND LAYER</text>
      <text x="450" y="315" text-anchor="middle" fill="rgba(139,92,246,0.5)" font-family="Outfit" font-size="10">Strategic Synthesizer</text>

      <!-- Story Maker -->
      <rect x="225" y="330" width="210" height="68" rx="10" fill="rgba(139,92,246,0.05)" stroke="rgba(139,92,246,0.15)" stroke-width="1"/>
      <text x="330" y="352" text-anchor="middle" fill="#c4b5fd" font-family="Space Grotesk" font-size="12" font-weight="700">Story Maker</text>
      <text x="330" y="367" text-anchor="middle" fill="rgba(139,92,246,0.4)" font-family="Outfit" font-size="8">Creating Big Ideas</text>
      <text x="330" y="380" text-anchor="middle" fill="rgba(139,92,246,0.3)" font-family="Outfit" font-size="7">Narrative Identity + LIWC</text>
      <text x="330" y="390" text-anchor="middle" fill="rgba(139,92,246,0.3)" font-family="Outfit" font-size="7">System 2: Creative synthesis</text>

      <!-- Master Planner -->
      <rect x="465" y="330" width="210" height="68" rx="10" fill="rgba(139,92,246,0.05)" stroke="rgba(139,92,246,0.15)" stroke-width="1"/>
      <text x="570" y="352" text-anchor="middle" fill="#c4b5fd" font-family="Space Grotesk" font-size="12" font-weight="700">Master Planner</text>
      <text x="570" y="367" text-anchor="middle" fill="rgba(139,92,246,0.4)" font-family="Outfit" font-size="8">Connecting Big Plans</text>
      <text x="570" y="380" text-anchor="middle" fill="rgba(139,92,246,0.3)" font-family="Outfit" font-size="7">Kahneman System 2 + Big Five</text>
      <text x="570" y="390" text-anchor="middle" fill="rgba(139,92,246,0.3)" font-family="Outfit" font-size="7">Stanford Agents: Planning module</text>

      <!-- Arrow down -->
      <line x1="450" y1="415" x2="450" y2="445" stroke="rgba(255,255,255,0.15)" stroke-width="1.5" marker-end="url(#arrowWhite)"/>
      <text x="465" y="435" fill="#555" font-family="Outfit" font-size="7">directs</text>


      <!-- ====== LAYER 3: BRAIN LAYER ====== -->
      <rect x="200" y="450" width="500" height="145" rx="16" fill="rgba(34,197,94,0.04)" stroke="rgba(34,197,94,0.25)" stroke-width="1.5"/>

      <text x="450" y="477" text-anchor="middle" fill="#4ade80" font-family="Space Grotesk" font-size="16" font-weight="800">BRAIN LAYER</text>
      <text x="450" y="495" text-anchor="middle" fill="rgba(34,197,94,0.5)" font-family="Outfit" font-size="10">Execution Engine</text>

      <!-- Leverage Engine -->
      <rect x="225" y="510" width="210" height="68" rx="10" fill="rgba(34,197,94,0.05)" stroke="rgba(34,197,94,0.15)" stroke-width="1"/>
      <text x="330" y="532" text-anchor="middle" fill="#86efac" font-family="Space Grotesk" font-size="12" font-weight="700">Leverage Engine</text>
      <text x="330" y="547" text-anchor="middle" fill="rgba(34,197,94,0.4)" font-family="Outfit" font-size="8">Finding Smart Shortcuts</text>
      <text x="330" y="560" text-anchor="middle" fill="rgba(34,197,94,0.3)" font-family="Outfit" font-size="7">Heuristics (Kahneman/Tversky)</text>
      <text x="330" y="570" text-anchor="middle" fill="rgba(34,197,94,0.3)" font-family="Outfit" font-size="7">Habit loops (Wood &amp; Runger)</text>

      <!-- Action Station -->
      <rect x="465" y="510" width="210" height="68" rx="10" fill="rgba(34,197,94,0.05)" stroke="rgba(34,197,94,0.15)" stroke-width="1"/>
      <text x="570" y="532" text-anchor="middle" fill="#86efac" font-family="Space Grotesk" font-size="12" font-weight="700">Action Station</text>
      <text x="570" y="547" text-anchor="middle" fill="rgba(34,197,94,0.4)" font-family="Outfit" font-size="8">Building &amp; Doing Stuff</text>
      <text x="570" y="560" text-anchor="middle" fill="rgba(34,197,94,0.3)" font-family="Outfit" font-size="7">OpenClaw: Events + Loop</text>
      <text x="570" y="570" text-anchor="middle" fill="rgba(34,197,94,0.3)" font-family="Outfit" font-size="7">Policy Layer enforcement</text>

      <!-- Arrow down -->
      <line x1="450" y1="595" x2="450" y2="625" stroke="rgba(255,255,255,0.15)" stroke-width="1.5" marker-end="url(#arrowWhite)"/>
      <text x="465" y="615" fill="#555" font-family="Outfit" font-size="7">queries</text>


      <!-- ====== LAYER 4: MEMORY LAYER ====== -->
      <rect x="200" y="630" width="500" height="155" rx="16" fill="rgba(96,165,250,0.04)" stroke="rgba(96,165,250,0.25)" stroke-width="1.5"/>

      <text x="450" y="657" text-anchor="middle" fill="#60a5fa" font-family="Space Grotesk" font-size="16" font-weight="800">MEMORY LAYER</text>
      <text x="450" y="675" text-anchor="middle" fill="rgba(96,165,250,0.5)" font-family="Outfit" font-size="10">Memory Graph System</text>

      <!-- Evidence Store (NEW split) -->
      <rect x="225" y="690" width="210" height="78" rx="10" fill="rgba(96,165,250,0.05)" stroke="rgba(96,165,250,0.15)" stroke-width="1"/>
      <text x="330" y="712" text-anchor="middle" fill="#93c5fd" font-family="Space Grotesk" font-size="11" font-weight="700">Evidence Store</text>
      <text x="330" y="726" text-anchor="middle" fill="rgba(96,165,250,0.35)" font-family="Outfit" font-size="8">Raw, immutable snippets</text>
      <text x="330" y="738" text-anchor="middle" fill="rgba(96,165,250,0.35)" font-family="Outfit" font-size="7">PROV-O provenance</text>
      <text x="330" y="748" text-anchor="middle" fill="rgba(96,165,250,0.35)" font-family="Outfit" font-size="7">Vector + Graph (FAISS/Neo4j)</text>
      <text x="330" y="760" text-anchor="middle" fill="rgba(200,168,78,0.35)" font-family="Outfit" font-size="7" font-style="italic">ENHANCED: split from claims</text>

      <!-- Claims + Traits Store (NEW split) -->
      <rect x="465" y="690" width="210" height="78" rx="10" fill="rgba(96,165,250,0.05)" stroke="rgba(96,165,250,0.15)" stroke-width="1"/>
      <text x="570" y="712" text-anchor="middle" fill="#93c5fd" font-family="Space Grotesk" font-size="11" font-weight="700">Claims + Traits</text>
      <text x="570" y="726" text-anchor="middle" fill="rgba(96,165,250,0.35)" font-family="Outfit" font-size="8">Versioned interpretations</text>
      <text x="570" y="738" text-anchor="middle" fill="rgba(96,165,250,0.35)" font-family="Outfit" font-size="7">Confidence + expiry</text>
      <text x="570" y="748" text-anchor="middle" fill="rgba(96,165,250,0.35)" font-family="Outfit" font-size="7">ID-RAG identity model</text>
      <text x="570" y="760" text-anchor="middle" fill="rgba(200,168,78,0.35)" font-family="Outfit" font-size="7" font-style="italic">ENHANCED: versioned, auditable</text>

      <!-- Arrow connecting evidence to claims -->
      <path d="M 435 730 L 465 730" fill="none" stroke="rgba(96,165,250,0.2)" stroke-width="1" marker-end="url(#arrowWhite)"/>


      <!-- ====== INGESTION PIPELINE (NEW - left side) ====== -->
      <rect x="135" y="815" width="160" height="86" rx="12" fill="rgba(200,168,78,0.04)" stroke="rgba(200,168,78,0.2)" stroke-width="1" stroke-dasharray="4,3"/>
      <text x="215" y="838" text-anchor="middle" fill="#C8A84E" font-family="Space Grotesk" font-size="10" font-weight="700" letter-spacing="1">INGESTION (NEW)</text>
      <text x="215" y="854" text-anchor="middle" fill="rgba(200,168,78,0.35)" font-family="Outfit" font-size="7">Messages / Heartbeats</text>
      <text x="215" y="866" text-anchor="middle" fill="rgba(200,168,78,0.35)" font-family="Outfit" font-size="7">Crons / Hooks / Webhooks</text>
      <text x="215" y="878" text-anchor="middle" fill="rgba(200,168,78,0.35)" font-family="Outfit" font-size="7">Normalize + Classify + Govern</text>
      <text x="215" y="893" text-anchor="middle" fill="rgba(200,168,78,0.3)" font-family="Outfit" font-size="7">ISO 27701 + PROV-O</text>

      <!-- Arrow: Ingestion -> Memory -->
      <path d="M 215 815 C 215 800, 280 790, 330 785" fill="none" stroke="rgba(200,168,78,0.3)" stroke-width="1.5" marker-end="url(#arrowGold)"/>

      <!-- Real world label -->
      <text x="215" y="935" text-anchor="middle" fill="#555" font-family="Outfit" font-size="8">REAL WORLD</text>
      <path d="M 215 925 L 215 910" fill="none" stroke="rgba(255,255,255,0.08)" stroke-width="1" marker-end="url(#arrowWhite)"/>


      <!-- ====== LEARNING LOOP (NEW - right side) ====== -->
      <rect x="605" y="815" width="160" height="86" rx="12" fill="rgba(200,168,78,0.04)" stroke="rgba(200,168,78,0.2)" stroke-width="1" stroke-dasharray="4,3"/>
      <text x="685" y="838" text-anchor="middle" fill="#C8A84E" font-family="Space Grotesk" font-size="10" font-weight="700" letter-spacing="1">LEARNING LOOP (NEW)</text>
      <text x="685" y="854" text-anchor="middle" fill="rgba(200,168,78,0.35)" font-family="Outfit" font-size="7">Observe every output</text>
      <text x="685" y="866" text-anchor="middle" fill="rgba(200,168,78,0.35)" font-family="Outfit" font-size="7">Reflect + update claims</text>
      <text x="685" y="878" text-anchor="middle" fill="rgba(200,168,78,0.35)" font-family="Outfit" font-size="7">Recalculate confidence</text>
      <text x="685" y="893" text-anchor="middle" fill="rgba(200,168,78,0.3)" font-family="Outfit" font-size="7">Park et al. Reflection cycle</text>

      <!-- Arrow: Learning Loop -> Memory -->
      <path d="M 685 815 C 685 800, 620 790, 570 785" fill="none" stroke="rgba(200,168,78,0.3)" stroke-width="1.5" marker-end="url(#arrowGold)"/>

      <!-- Arrow: Brain Layer output -> Learning Loop -->
      <path d="M 700 595 C 730 640, 740 720, 720 815" fill="none" stroke="rgba(200,168,78,0.15)" stroke-width="1.5" stroke-dasharray="6,4" marker-end="url(#arrowGold)"/>
      <text x="748" y="710" fill="rgba(200,168,78,0.3)" font-family="Outfit" font-size="7" transform="rotate(80,748,710)">feedback</text>


      <!-- ====== LEGEND ====== -->
      <line x1="170" y1="980" x2="730" y2="980" stroke="rgba(255,255,255,0.04)" stroke-width="1"/>

      <text x="450" y="1005" text-anchor="middle" fill="#555" font-family="Space Grotesk" font-size="9" font-weight="600" letter-spacing="3">LEGEND</text>

      <!-- Original layers -->
      <rect x="170" y="1020" width="12" height="12" rx="2" fill="none" stroke="rgba(200,168,78,0.4)" stroke-width="1.5"/>
      <text x="190" y="1030" fill="#888" font-family="Outfit" font-size="9">Mic's original 4 layers (solid borders)</text>

      <!-- New additions -->
      <rect x="170" y="1042" width="12" height="12" rx="2" fill="none" stroke="rgba(200,168,78,0.3)" stroke-width="1" stroke-dasharray="3,2"/>
      <text x="190" y="1052" fill="#888" font-family="Outfit" font-size="9">Research-suggested additions (dashed borders)</text>

      <!-- Safety shell -->
      <rect x="490" y="1020" width="12" height="12" rx="2" fill="none" stroke="rgba(248,113,113,0.3)" stroke-width="1.5" stroke-dasharray="4,3"/>
      <text x="510" y="1030" fill="#888" font-family="Outfit" font-size="9">Safety Shell wrapper (red dashed)</text>

      <!-- Feedback -->
      <line x1="490" y1="1048" x2="502" y2="1048" stroke="rgba(200,168,78,0.3)" stroke-width="1.5" stroke-dasharray="4,3"/>
      <text x="510" y="1052" fill="#888" font-family="Outfit" font-size="9">Feedback / learning path</text>

      <text x="450" y="1085" text-anchor="middle" fill="#333" font-family="Outfit" font-size="9">SodaLabs AI -- Digital Twin Brain Architecture Analysis -- February 25, 2026</text>
    </svg>
  </div>

  <p style="text-align:center; color:#666; font-size:13px;">The 4-layer hierarchy stays intact. Three additions complete the engineering: a Safety Shell wrapping everything, an Ingestion Pipeline feeding the Memory Layer, and a Learning Loop cycling outputs back into memory. Inside the Purpose Core, an Identity Kernel holds the persistent mathematical identity.</p>
</section>


<!-- ===== SUMMARY TABLE ===== -->
<section>
  <div class="section-number">Summary</div>
  <h2>Quick Reference: Layer-by-Layer</h2>

  <table class="compare-table">
    <thead>
      <tr>
        <th>Mic's Layer</th>
        <th>Research Validation</th>
        <th>What's Strong</th>
        <th>What to Add</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="color:#C8A84E;">Purpose Core</td>
        <td>SDT, MFT, Narrative Identity, Stanford Generative Agents</td>
        <td>Correct to place values at apex. Research-validated hierarchy.</td>
        <td>Add Identity Kernel (Big Five + MFT + SDT + LIWC). Make it a persistent data structure, not just aspirational.</td>
      </tr>
      <tr>
        <td style="color:#a78bfa;">Mind Layer</td>
        <td>Kahneman System 2, Big Five, LIWC, Deep Research Interpretation Layer</td>
        <td>Story Maker / Master Planner split maps to McAdams narrative vs. adaptations. Genuinely insightful.</td>
        <td>Explicitly tie to confidence scoring and "what would change my mind" uncertainty handling.</td>
      </tr>
      <tr>
        <td style="color:#4ade80;">Brain Layer</td>
        <td>Heuristics & Biases, Habit Research, OpenClaw Runtime, Deep Research Policy Layer</td>
        <td>Leverage Engine / Action Station = System 1 / System 2 execution pair. Architecturally elegant.</td>
        <td>Action Station needs explicit tool-permission gating and least-privilege enforcement (OWASP LLM06).</td>
      </tr>
      <tr>
        <td style="color:#60a5fa;">Memory Layer</td>
        <td>RAG, FAISS/HNSW, GraphRAG, PROV-O, ID-RAG</td>
        <td>Correctly placed as foundation. All computation draws from memory.</td>
        <td>Split into Evidence Store (immutable) and Claims Store (versioned). Add PROV-O provenance. Critical for auditability.</td>
      </tr>
      <tr>
        <td style="color:#f87171;">(Missing)</td>
        <td>Constitutional AI, OWASP, MITRE ATLAS, POPIA, EU AI Act, ISO 27001/27701</td>
        <td>--</td>
        <td>Add Safety Shell wrapping all layers. Not a new layer -- a wrapper. Fires on every input and output.</td>
      </tr>
      <tr>
        <td style="color:#C8A84E;">(Missing)</td>
        <td>PROV-O Pipeline, OpenClaw 5 Input Types, ISO 27701</td>
        <td>--</td>
        <td>Add Ingestion Pipeline. How data enters the system matters as much as what happens inside.</td>
      </tr>
      <tr>
        <td style="color:#C8A84E;">(Missing)</td>
        <td>Stanford Generative Agents (Reflection), Deep Research Feedback Flow</td>
        <td>--</td>
        <td>Add Learning Loop. Outputs feed back as observations. Confidence recalculated. Drift detected.</td>
      </tr>
    </tbody>
  </table>
</section>


<!-- ===== FOOTER ===== -->
<footer>
  <p>Analysis compiled February 25, 2026</p>
  <p>Based on 20 research domains, 75+ academic sources, the Deep Research 3-Pillar Blueprint, and OpenClaw agent patterns</p>
  <p style="margin-top:8px; color:#333;">SodaLabs AI -- "My aim is to design it as I see it but within logic"</p>
</footer>

</body>
</html>
